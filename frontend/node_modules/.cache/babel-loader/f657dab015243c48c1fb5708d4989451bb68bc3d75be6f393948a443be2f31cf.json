{"ast":null,"code":"import _defineProperty from\"/Users/a777/Desktop/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/a777/Desktop/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/a777/Desktop/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import*as auth from\"../utils/auth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(_ref){var handleLogin=_ref.handleLogin;var _useState=useState({email:'',password:''}),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],setUserData=_useState2[1];var navigate=useNavigate();var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setUserData(_objectSpread(_objectSpread({},userData),{},_defineProperty({},name,value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();if(!userData.email||!userData.password){return;}var password=userData.password,email=userData.email;auth.login(password,email).then(function(data){if(data.token){localStorage.setItem('token',data.token);handleLogin();navigate('/',{replace:true});}}).catch(function(err){return console.log(err);});};return/*#__PURE__*/_jsx(\"section\",{className:\"register page__center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"register__container\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"register__title\",children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"register__form\",name:\"register-form\",noValidate:true,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"form__label\",children:/*#__PURE__*/_jsx(\"input\",{value:userData.email,onChange:handleChange,className:\"register__input\",type:\"email\",placeholder:\"Email\",name:\"email\",minLength:\"2\",maxLength:\"40\",required:true})}),/*#__PURE__*/_jsx(\"label\",{className:\"form__label\",children:/*#__PURE__*/_jsx(\"input\",{value:userData.password,onChange:handleChange,type:\"password\",id:\"password\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",className:\"register__input\",name:\"password\",minLength:\"4\",maxLength:\"10\",required:true,autoComplete:\"on\"})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"register__submit-btn\",type:\"submit\",children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]})]})});};// function Login({ onLogin }) {\n//   const [email, setEmail] = React.useState(\"\");\n//   const [password, setPassword] = React.useState(\"\");\n//   function handleChangeEmail(e) {\n//     setEmail(e.target.value);\n//   }\n//   function handleChangePassword(e) {\n//     setPassword(e.target.value);\n//   }\n//   function handleSubmit(e) {\n//     e.preventDefault();\n//     if (!email || !password) {\n//       return;\n//     }\n//     onLogin(password, email);\n//   }\nexport default Login;","map":{"version":3,"names":["React","useState","useNavigate","auth","jsx","_jsx","jsxs","_jsxs","Login","_ref","handleLogin","_useState","email","password","_useState2","_slicedToArray","userData","setUserData","navigate","handleChange","e","_e$target","target","name","value","_objectSpread","_defineProperty","handleSubmit","preventDefault","login","then","data","token","localStorage","setItem","replace","catch","err","console","log","className","children","noValidate","onSubmit","onChange","type","placeholder","minLength","maxLength","required","id","autoComplete"],"sources":["/Users/a777/Desktop/react-mesto-api-full-gha/frontend/src/components/Login.js"],"sourcesContent":["import React, {useState}  from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport * as auth from \"../utils/auth\" \n\nconst Login = ({ handleLogin }) => {\n\tconst [userData, setUserData] = useState({\n\t\temail: '',\n\t\tpassword: ''\n\t})\n\n\tconst navigate = useNavigate();\n\n\tconst handleChange = (e) => {\n\t\tconst {name, value} = e.target;\n\n\t\tsetUserData({\n\t\t\t...userData,\n\t\t\t[name]: value\n\t\t});\n\t}\n\n\tconst handleSubmit = (e) => {\n\t\te.preventDefault();\n\t\tif (!userData.email || !userData.password) {\n\t\t\treturn;\n\t\t}\n\t\tconst { password, email } = userData;\n\t\tauth.login(password, email)\n\t\t\t.then((data) => {\n\t\t\t\tif(data.token) {\n\t\t\t\t\tlocalStorage.setItem('token', data.token);\n\t\t\t\t\thandleLogin();\n\t\t\t\t\tnavigate('/', {replace: true})\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(err => console.log(err));\n\t\t}\n\t\t\n\t\treturn (\n\t\t\t<section className=\"register page__center\">\n\t\t\t\t<div className=\"register__container\">\n\t\t\t\t\t<h3 className=\"register__title\">Войти</h3>\n\t\t\t\t\t<form\n\t\t\t\t\t\tclassName=\"register__form\"\n\t\t\t\t\t\tname=\"register-form\"\n\t\t\t\t\t\tnoValidate\n\t\t\t\t\t\tonSubmit={handleSubmit}\n\t\t\t\t\t>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label className=\"form__label\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tvalue={userData.email}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\tclassName=\"register__input\"\n\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\tplaceholder=\"Email\"\n\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\tminLength=\"2\"\n\t\t\t\t\t\t\tmaxLength=\"40\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t</label>\n\t\t\t\t\t<label className=\"form__label\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tvalue={userData.password}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tid=\"password\"\n\t\t\t\t\t\t\tplaceholder=\"Пароль\"\n\t\t\t\t\t\t\tclassName=\"register__input\"\n\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\tminLength=\"4\"\n\t\t\t\t\t\t\tmaxLength=\"10\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tautoComplete=\"on\"\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\n\t\t\t\t\t\t<button className=\"register__submit-btn\" type=\"submit\">\n\t\t\t\t\t\t\tВойти\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t);\n\t}\n\t// function Login({ onLogin }) {\n\t\t//   const [email, setEmail] = React.useState(\"\");\n\t\t//   const [password, setPassword] = React.useState(\"\");\n\t\t\n\t\t//   function handleChangeEmail(e) {\n\t\t\t//     setEmail(e.target.value);\n\t\t\t//   }\n\t\t\t\n\t\t\t//   function handleChangePassword(e) {\n\t\t\t\t//     setPassword(e.target.value);\n\t\t\t\t//   }\n\t\t\t\t\n\t\t\t\t//   function handleSubmit(e) {\n//     e.preventDefault();\n//     if (!email || !password) {\n//       return;\n//     }\n//     onLogin(password, email);\n//   }\n\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}