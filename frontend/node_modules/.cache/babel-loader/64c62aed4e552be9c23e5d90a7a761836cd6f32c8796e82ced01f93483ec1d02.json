{"ast":null,"code":"import _classCallCheck from\"/Users/a777/Desktop/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/a777/Desktop/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Api=/*#__PURE__*/function(){function Api(_ref){var baseUrl=_ref.baseUrl,headers=_ref.headers;_classCallCheck(this,Api);this._baseUrl=baseUrl;this._headers=headers;this._userUrl=\"\".concat(this._baseUrl,\"/users/me\");this._cardsUrl=\"\".concat(this._baseUrl,\"/cards\");this._likesUrl=\"\".concat(this._baseUrl,\"/cards/likes\");this._token=headers[\"authorization\"];}_createClass(Api,[{key:\"_checkResponse\",value:function _checkResponse(response,method){return response.ok?response.json():Promise.reject(\"\".concat(method,\": \").concat(response.status));}},{key:\"getUserData\",value:function getUserData(){return fetch(this._userUrl,{credentials:'include',headers:this._headers}).then(function(res){if(res.ok){return res.json();}return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));});}},{key:\"saveUserChanges\",value:function saveUserChanges(_ref2){var name=_ref2.name,about=_ref2.about;return fetch(this._userUrl,{credentials:'include',method:\"PATCH\",headers:{authorization:this._token,\"Content-Type\":\"application/json\"},body:JSON.stringify({name:name,about:about})}).then(function(res){if(res.ok){return res.json();}return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));});}},{key:\"changedAvatar\",value:function changedAvatar(src){return fetch(\"\".concat(this._userUrl,\"/avatar\"),{credentials:'include',method:\"PATCH\",headers:{authorization:this._token,\"Content-Type\":\"application/json\"},body:JSON.stringify({avatar:src})}).then(function(res){if(res.ok){return res.json();}return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));});}},{key:\"setUserInfo\",value:function setUserInfo(name,about){var _this=this;return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{credentials:'include',headers:this._headers,method:\"PATCH\",body:JSON.stringify({name:name,about:about})}).then(function(res){return _this._checkResponse(res,\"setUserInfo\");});}},{key:\"getInitialCards\",value:function getInitialCards(){var _this2=this;return fetch(\"\".concat(this._baseUrl,\"/cards\"),{headers:this._headers}).then(function(res){return _this2._checkResponse(res,\"getInitialCards\");});}},{key:\"postNewCard\",value:function postNewCard(_ref3){var name=_ref3.name,link=_ref3.link;return fetch(this._cardsUrl,{credentials:'include',method:\"POST\",headers:{authorization:this._token,\"Content-Type\":\"application/json\"},body:JSON.stringify({name:name,link:link})}).then(function(res){if(res.ok){return res.json();}return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));});}},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(id,isNotLiked){return fetch(\"\".concat(this._likesUrl,\"/\").concat(id),{credentials:'include',method:isNotLiked?\"PUT\":\"DELETE\",headers:this._headers}).then(function(res){if(res.ok){return res.json();}return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));});}},{key:\"deleteCard\",value:function deleteCard(id){return fetch(\"\".concat(this._cardsUrl,\"/\").concat(id),{credentials:'include',method:'DELETE',headers:{authorization:this._token}}).then(function(res){if(res.ok){return res.json();}return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));});}}]);return Api;}();var api=new Api({baseUrl:\"http://localhost:3000\",headers:{authorization:\"2ceb7c58-7c31-4d20-a44d-d2bf37d02e88\",\"Content-Type\":\"aaplication/json\"}});export{Api,api};","map":{"version":3,"names":["Api","_ref","baseUrl","headers","_classCallCheck","_baseUrl","_headers","_userUrl","concat","_cardsUrl","_likesUrl","_token","_createClass","key","value","_checkResponse","response","method","ok","json","Promise","reject","status","getUserData","fetch","credentials","then","res","saveUserChanges","_ref2","name","about","authorization","body","JSON","stringify","changedAvatar","src","avatar","setUserInfo","_this","getInitialCards","_this2","postNewCard","_ref3","link","changeLikeCardStatus","id","isNotLiked","deleteCard","api"],"sources":["/Users/a777/Desktop/react-mesto-api-full-gha/frontend/src/utils/api.js"],"sourcesContent":["class Api {\n  constructor({ baseUrl, headers }) {\n    this._baseUrl = baseUrl;\n    this._headers = headers;\n    this._userUrl = `${this._baseUrl}/users/me`;\n\t\tthis._cardsUrl = `${this._baseUrl}/cards`\n    this._likesUrl = `${this._baseUrl}/cards/likes`;\n    this._token = headers[`authorization`];\n  }\n\n  _checkResponse(response, method) {\n    return response.ok\n      ? response.json()\n      : Promise.reject(`${method}: ${response.status}`);\n  }\n\n  getUserData() {\n    return fetch(this._userUrl, {\n\t\t\tcredentials: 'include',\n      headers: this._headers,\n    }).then((res) => {\n      if (res.ok) {\n        return res.json();\n      }\n      return Promise.reject(`Ошибка: ${res.status}`);\n    });\n  }\n\n  saveUserChanges({ name, about }) {\n    return fetch(this._userUrl, {\n\t\t\tcredentials: 'include',\n      method: \"PATCH\",\n      headers: {\n        authorization: this._token,\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        name: name,\n        about: about,\n      }),\n    }).then((res) => {\n      if (res.ok) {\n        return res.json();\n      }\n      return Promise.reject(`Ошибка: ${res.status}`);\n    });\n  }\n\n  changedAvatar(src) {\n    return fetch(`${this._userUrl}/avatar`, {\n\t\t\tcredentials: 'include',\n      method: \"PATCH\",\n      headers: {\n        authorization: this._token,\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        avatar: src,\n      }),\n    }).then((res) => {\n      if (res.ok) {\n        return res.json();\n      }\n      return Promise.reject(`Ошибка: ${res.status}`);\n    });\n  }\n\n  setUserInfo(name, about) {\n    return fetch(`${this._baseUrl}/users/me`, {\n\t\t\tcredentials: 'include',\n      headers: this._headers,\n      method: \"PATCH\",\n      body: JSON.stringify({\n        name: name,\n        about: about,\n      }),\n    }).then((res) => {\n      return this._checkResponse(res, \"setUserInfo\");\n    });\n  }\n\n  getInitialCards() {\n    return fetch(`${this._baseUrl}/cards`, { headers: this._headers }).then(\n      (res) => {\n        return this._checkResponse(res, \"getInitialCards\");\n      }\n    );\n  }\n\n\tpostNewCard({\n\t\tname,\n\t\tlink\n\t}) {\n\t\treturn fetch(this._cardsUrl, {\n\t\t\tcredentials: 'include', \n\t\t\tmethod: \"POST\",\n\t\t\theaders: {\n\t\t\t\tauthorization: this._token,\n        \"Content-Type\": \"application/json\",\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n        name: name,\n\t\t\t\tlink: link,\n      }),\n    }).then((res) => {\n      if (res.ok) {\n        return res.json();\n      }\n      return Promise.reject(`Ошибка: ${res.status}`);\n    });\n\t\t\n\t}\n\n  changeLikeCardStatus(id, isNotLiked) {\n    return fetch(`${this._likesUrl}/${id}`, {\n\t\t\tcredentials: 'include',\n      method: isNotLiked ? \"PUT\" : \"DELETE\",\n      headers: this._headers,\n    }).then((res) => {\n      if (res.ok) {\n        return res.json();\n      }\n      return Promise.reject(`Ошибка: ${res.status}`);\n    });\n  }\n\n\tdeleteCard(id) {\n\t\treturn fetch(`${this._cardsUrl}/${id}`, {\n\t\t\tcredentials: 'include',\n\t\t\tmethod: 'DELETE',\n\t\t\theaders: {\n\t\t\t\tauthorization: this._token,\n\t\t\t}\n\t\t}).then((res) => {\n      if (res.ok) {\n        return res.json();\n      }\n      return Promise.reject(`Ошибка: ${res.status}`);\n    });\n\t}\n\n}\nconst api = new Api({\n  baseUrl: \"http://localhost:3000\",\n  headers: {\n    authorization: \"2ceb7c58-7c31-4d20-a44d-d2bf37d02e88\",\n    \"Content-Type\": \"aaplication/json\",\n  },\n});\n\nexport { Api, api };\n\n"],"mappings":"uRAAM,CAAAA,GAAG,yBACP,SAAAA,IAAAC,IAAA,CAAkC,IAApB,CAAAC,OAAO,CAAAD,IAAA,CAAPC,OAAO,CAAEC,OAAO,CAAAF,IAAA,CAAPE,OAAO,CAAAC,eAAA,MAAAJ,GAAA,EAC5B,IAAI,CAACK,QAAQ,CAAGH,OAAO,CACvB,IAAI,CAACI,QAAQ,CAAGH,OAAO,CACvB,IAAI,CAACI,QAAQ,IAAAC,MAAA,CAAM,IAAI,CAACH,QAAQ,aAAW,CAC7C,IAAI,CAACI,SAAS,IAAAD,MAAA,CAAM,IAAI,CAACH,QAAQ,UAAQ,CACvC,IAAI,CAACK,SAAS,IAAAF,MAAA,CAAM,IAAI,CAACH,QAAQ,gBAAc,CAC/C,IAAI,CAACM,MAAM,CAAGR,OAAO,iBAAiB,CACxC,CAACS,YAAA,CAAAZ,GAAA,GAAAa,GAAA,kBAAAC,KAAA,CAED,SAAAC,eAAeC,QAAQ,CAAEC,MAAM,CAAE,CAC/B,MAAO,CAAAD,QAAQ,CAACE,EAAE,CACdF,QAAQ,CAACG,IAAI,CAAC,CAAC,CACfC,OAAO,CAACC,MAAM,IAAAb,MAAA,CAAIS,MAAM,OAAAT,MAAA,CAAKQ,QAAQ,CAACM,MAAM,CAAE,CAAC,CACrD,CAAC,GAAAT,GAAA,eAAAC,KAAA,CAED,SAAAS,YAAA,CAAc,CACZ,MAAO,CAAAC,KAAK,CAAC,IAAI,CAACjB,QAAQ,CAAE,CAC7BkB,WAAW,CAAE,SAAS,CACnBtB,OAAO,CAAE,IAAI,CAACG,QAChB,CAAC,CAAC,CAACoB,IAAI,CAAC,SAACC,GAAG,CAAK,CACf,GAAIA,GAAG,CAACT,EAAE,CAAE,CACV,MAAO,CAAAS,GAAG,CAACR,IAAI,CAAC,CAAC,CACnB,CACA,MAAO,CAAAC,OAAO,CAACC,MAAM,0CAAAb,MAAA,CAAYmB,GAAG,CAACL,MAAM,CAAE,CAAC,CAChD,CAAC,CAAC,CACJ,CAAC,GAAAT,GAAA,mBAAAC,KAAA,CAED,SAAAc,gBAAAC,KAAA,CAAiC,IAAf,CAAAC,IAAI,CAAAD,KAAA,CAAJC,IAAI,CAAEC,KAAK,CAAAF,KAAA,CAALE,KAAK,CAC3B,MAAO,CAAAP,KAAK,CAAC,IAAI,CAACjB,QAAQ,CAAE,CAC7BkB,WAAW,CAAE,SAAS,CACnBR,MAAM,CAAE,OAAO,CACfd,OAAO,CAAE,CACP6B,aAAa,CAAE,IAAI,CAACrB,MAAM,CAC1B,cAAc,CAAE,kBAClB,CAAC,CACDsB,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBL,IAAI,CAAEA,IAAI,CACVC,KAAK,CAAEA,KACT,CAAC,CACH,CAAC,CAAC,CAACL,IAAI,CAAC,SAACC,GAAG,CAAK,CACf,GAAIA,GAAG,CAACT,EAAE,CAAE,CACV,MAAO,CAAAS,GAAG,CAACR,IAAI,CAAC,CAAC,CACnB,CACA,MAAO,CAAAC,OAAO,CAACC,MAAM,0CAAAb,MAAA,CAAYmB,GAAG,CAACL,MAAM,CAAE,CAAC,CAChD,CAAC,CAAC,CACJ,CAAC,GAAAT,GAAA,iBAAAC,KAAA,CAED,SAAAsB,cAAcC,GAAG,CAAE,CACjB,MAAO,CAAAb,KAAK,IAAAhB,MAAA,CAAI,IAAI,CAACD,QAAQ,YAAW,CACzCkB,WAAW,CAAE,SAAS,CACnBR,MAAM,CAAE,OAAO,CACfd,OAAO,CAAE,CACP6B,aAAa,CAAE,IAAI,CAACrB,MAAM,CAC1B,cAAc,CAAE,kBAClB,CAAC,CACDsB,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBG,MAAM,CAAED,GACV,CAAC,CACH,CAAC,CAAC,CAACX,IAAI,CAAC,SAACC,GAAG,CAAK,CACf,GAAIA,GAAG,CAACT,EAAE,CAAE,CACV,MAAO,CAAAS,GAAG,CAACR,IAAI,CAAC,CAAC,CACnB,CACA,MAAO,CAAAC,OAAO,CAACC,MAAM,0CAAAb,MAAA,CAAYmB,GAAG,CAACL,MAAM,CAAE,CAAC,CAChD,CAAC,CAAC,CACJ,CAAC,GAAAT,GAAA,eAAAC,KAAA,CAED,SAAAyB,YAAYT,IAAI,CAAEC,KAAK,CAAE,KAAAS,KAAA,MACvB,MAAO,CAAAhB,KAAK,IAAAhB,MAAA,CAAI,IAAI,CAACH,QAAQ,cAAa,CAC3CoB,WAAW,CAAE,SAAS,CACnBtB,OAAO,CAAE,IAAI,CAACG,QAAQ,CACtBW,MAAM,CAAE,OAAO,CACfgB,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBL,IAAI,CAAEA,IAAI,CACVC,KAAK,CAAEA,KACT,CAAC,CACH,CAAC,CAAC,CAACL,IAAI,CAAC,SAACC,GAAG,CAAK,CACf,MAAO,CAAAa,KAAI,CAACzB,cAAc,CAACY,GAAG,CAAE,aAAa,CAAC,CAChD,CAAC,CAAC,CACJ,CAAC,GAAAd,GAAA,mBAAAC,KAAA,CAED,SAAA2B,gBAAA,CAAkB,KAAAC,MAAA,MAChB,MAAO,CAAAlB,KAAK,IAAAhB,MAAA,CAAI,IAAI,CAACH,QAAQ,WAAU,CAAEF,OAAO,CAAE,IAAI,CAACG,QAAS,CAAC,CAAC,CAACoB,IAAI,CACrE,SAACC,GAAG,CAAK,CACP,MAAO,CAAAe,MAAI,CAAC3B,cAAc,CAACY,GAAG,CAAE,iBAAiB,CAAC,CACpD,CACF,CAAC,CACH,CAAC,GAAAd,GAAA,eAAAC,KAAA,CAEF,SAAA6B,YAAAC,KAAA,CAGG,IAFF,CAAAd,IAAI,CAAAc,KAAA,CAAJd,IAAI,CACJe,IAAI,CAAAD,KAAA,CAAJC,IAAI,CAEJ,MAAO,CAAArB,KAAK,CAAC,IAAI,CAACf,SAAS,CAAE,CAC5BgB,WAAW,CAAE,SAAS,CACtBR,MAAM,CAAE,MAAM,CACdd,OAAO,CAAE,CACR6B,aAAa,CAAE,IAAI,CAACrB,MAAM,CACtB,cAAc,CAAE,kBACrB,CAAC,CACDsB,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAChBL,IAAI,CAAEA,IAAI,CACde,IAAI,CAAEA,IACJ,CAAC,CACH,CAAC,CAAC,CAACnB,IAAI,CAAC,SAACC,GAAG,CAAK,CACf,GAAIA,GAAG,CAACT,EAAE,CAAE,CACV,MAAO,CAAAS,GAAG,CAACR,IAAI,CAAC,CAAC,CACnB,CACA,MAAO,CAAAC,OAAO,CAACC,MAAM,0CAAAb,MAAA,CAAYmB,GAAG,CAACL,MAAM,CAAE,CAAC,CAChD,CAAC,CAAC,CAEL,CAAC,GAAAT,GAAA,wBAAAC,KAAA,CAEA,SAAAgC,qBAAqBC,EAAE,CAAEC,UAAU,CAAE,CACnC,MAAO,CAAAxB,KAAK,IAAAhB,MAAA,CAAI,IAAI,CAACE,SAAS,MAAAF,MAAA,CAAIuC,EAAE,EAAI,CACzCtB,WAAW,CAAE,SAAS,CACnBR,MAAM,CAAE+B,UAAU,CAAG,KAAK,CAAG,QAAQ,CACrC7C,OAAO,CAAE,IAAI,CAACG,QAChB,CAAC,CAAC,CAACoB,IAAI,CAAC,SAACC,GAAG,CAAK,CACf,GAAIA,GAAG,CAACT,EAAE,CAAE,CACV,MAAO,CAAAS,GAAG,CAACR,IAAI,CAAC,CAAC,CACnB,CACA,MAAO,CAAAC,OAAO,CAACC,MAAM,0CAAAb,MAAA,CAAYmB,GAAG,CAACL,MAAM,CAAE,CAAC,CAChD,CAAC,CAAC,CACJ,CAAC,GAAAT,GAAA,cAAAC,KAAA,CAEF,SAAAmC,WAAWF,EAAE,CAAE,CACd,MAAO,CAAAvB,KAAK,IAAAhB,MAAA,CAAI,IAAI,CAACC,SAAS,MAAAD,MAAA,CAAIuC,EAAE,EAAI,CACvCtB,WAAW,CAAE,SAAS,CACtBR,MAAM,CAAE,QAAQ,CAChBd,OAAO,CAAE,CACR6B,aAAa,CAAE,IAAI,CAACrB,MACrB,CACD,CAAC,CAAC,CAACe,IAAI,CAAC,SAACC,GAAG,CAAK,CACb,GAAIA,GAAG,CAACT,EAAE,CAAE,CACV,MAAO,CAAAS,GAAG,CAACR,IAAI,CAAC,CAAC,CACnB,CACA,MAAO,CAAAC,OAAO,CAACC,MAAM,0CAAAb,MAAA,CAAYmB,GAAG,CAACL,MAAM,CAAE,CAAC,CAChD,CAAC,CAAC,CACL,CAAC,WAAAtB,GAAA,KAGF,GAAM,CAAAkD,GAAG,CAAG,GAAI,CAAAlD,GAAG,CAAC,CAClBE,OAAO,CAAE,uBAAuB,CAChCC,OAAO,CAAE,CACP6B,aAAa,CAAE,sCAAsC,CACrD,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CAEF,OAAShC,GAAG,CAAEkD,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}